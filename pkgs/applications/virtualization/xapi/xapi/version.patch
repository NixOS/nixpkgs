diff -uNr xen-api-1.9.57/Makefile xen-api-1.9.57-new/Makefile
--- xen-api-1.9.57/Makefile	2014-10-23 19:13:54.000000000 +0200
+++ xen-api-1.9.57-new/Makefile	2015-01-01 21:56:32.632127983 +0100
@@ -119,18 +119,18 @@
 .PHONY: version
 version:
 	@printf "(* This file is autogenerated.  Grep for e17512ce-ba7c-11df-887b-0026b9799147 (random uuid) to see where it comes from. ;o) *) \n \
-	let git_id = \"$(shell git show-ref --head | grep -E ' HEAD$$' | cut -f 1 -d ' ')\" \n \
-	let hostname = \"$(shell hostname)\" \n \
-	let date = \"$(shell date -u +%Y-%m-%d)\" \n \
+	let git_id = \"1234567890\" \n \
+	let hostname = \"nixos\" \n \
+	let date = \"2000-01-01\" \n \
 	let product_version () = Inventory.lookup ~default:\"\" \"PRODUCT_VERSION\" \n \
 	let product_version_text () = Inventory.lookup ~default:\"\" \"PRODUCT_VERSION_TEXT\" \n \
 	let product_version_text_short () = Inventory.lookup ~default:\"\" \"PRODUCT_VERSION_TEXT_SHORT\" \n \
-	let platform_name = \"$(PLATFORM_NAME)\" \n \
-	let platform_version = \"$(PLATFORM_VERSION)\" \n \
+	let platform_name = \"nixos\" \n \
+	let platform_version = \"1\" \n \
 	let product_brand () = Inventory.lookup ~default:\"\" \"PRODUCT_BRAND\" \n \
-	let build_number () = Inventory.lookup ~default:\"$(BUILD_NUMBER)\" \"BUILD_NUMBER\" \n \
-	let xapi_version_major = $(shell cut -d. -f1 VERSION) \n \
-	let xapi_version_minor = $(shell cut -d. -f2 VERSION) \n" \
+	let build_number () = Inventory.lookup ~default:\"1\" \"BUILD_NUMBER\" \n \
+	let xapi_version_major = 1 \n \
+	let xapi_version_minor = 0 \n" \
 	> ocaml/util/version.ml
 
 .PHONY: clean
