# This file was generated by go2nix.
{ lib, buildGoPackage, fetchFromGitHub, installShellFiles }:

buildGoPackage rec {
  pname = "machine";
  version = "0.16.2";

  goPackagePath = "github.com/docker/machine";

  src = fetchFromGitHub {
    rev = "v${version}";
    owner = "docker";
    repo = "machine";
    sha256 = "sha256-Mo2OGpem3p6hCNJ46+RH3BfC7kmKB4yk4Vzo38K88UM=";
  };

  nativeBuildInputs = [ installShellFiles ];

  postInstall = ''
    pushd go/src/${goPackagePath}/contrib/completion
    installShellCompletion --bash bash/*
    installShellCompletion --zsh zsh/*
    popd
  '';

  meta = with lib; {
    homepage = "https://docs.docker.com/machine/";
    description = "Docker Machine is a tool that lets you install Docker Engine on virtual hosts, and manage Docker Engine on the hosts";
    license = licenses.asl20;
    maintainers = with maintainers; [ offline ];
    platforms = platforms.unix;
  };
}
