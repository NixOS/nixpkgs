# This file was generated by go2nix.
{ stdenv, buildGoPackage, fetchFromGitHub }:

buildGoPackage rec {
  name = "machine-${version}";
  version = "0.16.1";

  goPackagePath = "github.com/docker/machine";

  src = fetchFromGitHub {
    rev = "v${version}";
    owner = "docker";
    repo = "machine";
    sha256 = "0xxzxi5v7ji9j2k7kxhi0ah91lfa7b9rg3nywgx0lkv8dlgp8kmy";
  };

  postInstall = ''
    mkdir -p \
      $bin/share/bash-completion/completions/ \
      $bin/share/zsh/site-functions/

    cp go/src/github.com/docker/machine/contrib/completion/bash/* $bin/share/bash-completion/completions/
    cp go/src/github.com/docker/machine/contrib/completion/zsh/* $bin/share/zsh/site-functions/
  '';

  meta = with stdenv.lib; {
    homepage = https://docs.docker.com/machine/;
    description = "Docker Machine is a tool that lets you install Docker Engine on virtual hosts, and manage Docker Engine on the hosts.";
    license = licenses.asl20;
    maintainers = with maintainers; [ offline tailhook ];
    platforms = platforms.unix;
  };
}
