--- a/Makefile	2024-04-19 12:05:45.335845467 +0300
+++ b/Makefile	2024-04-19 12:11:31.940718441 +0300
@@ -5,8 +5,11 @@
 
 all: desktop bindings build
 
-bindings: 
-	./bin/gi-crystal || $(CRYSTAL_LOCATION)shards install && ./bin/gi-crystal
+bindings:
+	mkdir bin/
+	cd lib/gi-crystal && shards build -Dpreview_mt --release --no-debug
+	cd ../..
+	cp lib/gi-crystal/bin/gi-crystal bin/ && ./bin/gi-crystal
 
 build:
 	COLLISION_LOCALE_LOCATION="$(PREFIX)$(LOCALE_LOCATION)" $(CRYSTAL_LOCATION)shards build -Dpreview_mt --release --no-debug
@@ -43,7 +46,7 @@
 	install -D -m 0644 data/dev.geopjr.Collision.desktop $(PREFIX)/share/applications/dev.geopjr.Collision.desktop
 	install -D -m 0644 data/icons/dev.geopjr.Collision.svg $(PREFIX)/share/icons/hicolor/scalable/apps/dev.geopjr.Collision.svg
 	install -D -m 0644 data/icons/dev.geopjr.Collision-symbolic.svg $(PREFIX)/share/icons/hicolor/symbolic/apps/dev.geopjr.Collision-symbolic.svg
-	gtk-update-icon-cache $(PREFIX)/share/icons/hicolor
+	gtk4-update-icon-cache --ignore-theme-index $(PREFIX)/share/icons/hicolor
 	glib-compile-schemas $(PREFIX)/share/glib-2.0/schemas/
 
 uninstall:
