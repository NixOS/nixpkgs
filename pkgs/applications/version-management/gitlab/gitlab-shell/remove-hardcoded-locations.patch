diff --git a/go/internal/config/config.go b/go/internal/config/config.go
index d651744..da06d52 100644
--- a/go/internal/config/config.go
+++ b/go/internal/config/config.go
@@ -3,7 +3,6 @@ package config
 import (
 	"io/ioutil"
 	"net/url"
-	"os"
 	"path"
 	"path/filepath"
 
@@ -44,16 +43,13 @@ type Config struct {
 }
 
 func New() (*Config, error) {
-	dir, err := os.Getwd()
-	if err != nil {
-		return nil, err
-	}
+	dir := "/run/gitlab"
 
 	return NewFromDir(dir)
 }
 
 func NewFromDir(dir string) (*Config, error) {
-	return newFromFile(path.Join(dir, configFile))
+	return newFromFile("/run/gitlab/shell-config.yml")
 }
 
 func (c *Config) FeatureEnabled(featureName string) bool {
diff --git a/lib/gitlab_keys.rb b/lib/gitlab_keys.rb
index 4742c45..bba5151 100644
--- a/lib/gitlab_keys.rb
+++ b/lib/gitlab_keys.rb
@@ -2,7 +2,7 @@ module GitlabKeys
   class KeyError < StandardError; end
 
   def self.command(whatever)
-    "#{ROOT_PATH}/bin/gitlab-shell #{whatever}"
+    "/run/current-system/sw/bin/gitlab-shell #{whatever}"
   end
 
   def self.command_key(key_id)
diff --git a/lib/gitlab_shell.rb b/lib/gitlab_shell.rb
index 303f4d5..0ef67d1 100644
--- a/lib/gitlab_shell.rb
+++ b/lib/gitlab_shell.rb
@@ -195,7 +195,8 @@ class GitlabShell # rubocop:disable Metrics/ClassLength
 
     args = [executable, gitaly_address, json_args]
     # We use 'chdir: ROOT_PATH' to let the next executable know where config.yml is.
-    Kernel.exec(env, *args, unsetenv_others: true, chdir: ROOT_PATH)
+    # Except we don't, because we're already in the right directory on nixos!
+    Kernel.exec(env, *args, unsetenv_others: true)
   end
 
   def api
