From 1e2914527c058b137aee4e3e7a8a915c172b6146 Mon Sep 17 00:00:00 2001
From: Jason Felice <jason.m.felice@gmail.com>
Date: Mon, 1 Jul 2019 15:06:10 -0400
Subject: [PATCH 1/3] Use the correct clang

And also don't assume we have sysctl.
---
 INSTALL | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/INSTALL b/INSTALL
index cb0df570..d963e19c 100755
--- a/INSTALL
+++ b/INSTALL
@@ -108,7 +108,7 @@ if [ `uname` = Darwin ]; then
 	# On Darwin, uname -m -p cannot be trusted.
 	echo "* Running on Darwin: checking architecture..."
 	rm -f ./a.out
-	if ! gcc lib/darwin-main.c >/dev/null 2>&1; then
+	if ! clang lib/darwin-main.c >/dev/null; then
 		echo "Cannot find gcc. You may need to install the command-line tools using Xcode." >&2
 		echo "See http://swtch.com/go/xcodegcc for details." >&2
 		exit 1
@@ -117,7 +117,7 @@ if [ `uname` = Darwin ]; then
 	*x86_64*)
 		echo "	x86-64 found."
 		echo "OBJTYPE=x86_64" >>$PLAN9/config
-		echo "CC9='xcrun --sdk macosx clang'" >>$PLAN9/config
+		echo "CC9='$(which clang)'" >>$PLAN9/config
 		;;
 	*i386*)
 		echo "	i386 found."
-- 
2.21.0

