# This file was auto-generated by cabal2nix. Please do NOT edit manually!

{ cabal, bifunctors, clashLib, clashPrelude, filepath, ghcPaths
, hashable, haskeline, lens, makeWrapper, mtl, text, transformers, unbound
, unorderedContainers, thLift
}:

cabal.mkDerivation (self: {
  pname = "clash-ghc";
  version = "0.4";
  sha256 = "0pyv8snrmy7x9gv6xna5rd5chacrdvczcjs7854b80pifhag5c2g";
  isLibrary = false;
  isExecutable = true;
  buildDepends = [
    bifunctors clashLib clashPrelude filepath ghcPaths hashable
    haskeline lens mtl text transformers unbound unorderedContainers
    thLift
  ];
  buildTools = [ makeWrapper ];
  postInstall = ''
    echo ${clashPrelude}
    wrapProgram $out/bin/clash \
      --add-flags "-package-db ${clashPrelude}/lib/ghc-${self.ghc.version}/package.conf.d/${clashPrelude.fname}.installedconf" \
      --add-flags "-package-db ${thLift}/lib/ghc-${self.ghc.version}/package.conf.d/${thLift.fname}.installedconf" \
      --add-flags "\$(${self.ghc.GHCGetPackages} ${self.ghc.version} \"\$(dirname \$0)\" \"-package-db\")"
  '';
  meta = {
    homepage = "http://christiaanb.github.io/clash2";
    description = "CAES Language for Synchronous Hardware";
    license = "unknown";
    platforms = self.ghc.meta.platforms;
  };
})
