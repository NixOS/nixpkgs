diff -rc toolbuslib-1.1/configure toolbuslib-1.1-new/configure
*** toolbuslib-1.1/configure	2008-11-10 13:59:46.000000000 +0100
--- toolbuslib-1.1-new/configure	2010-08-23 16:53:39.000000000 +0200
***************
*** 20719,21162 ****
  fi
  
  
- if test "${ac_cv_header_netdb_h+set}" = set; then
-   echo "$as_me:$LINENO: checking for netdb.h" >&5
- echo $ECHO_N "checking for netdb.h... $ECHO_C" >&6
- if test "${ac_cv_header_netdb_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_netdb_h" >&5
- echo "${ECHO_T}$ac_cv_header_netdb_h" >&6
- else
-   # Is the header compilable?
- echo "$as_me:$LINENO: checking netdb.h usability" >&5
- echo $ECHO_N "checking netdb.h usability... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- $ac_includes_default
- #include <netdb.h>
- _ACEOF
- rm -f conftest.$ac_objext
- if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-   (eval $ac_compile) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } &&
- 	 { ac_try='test -z "$ac_c_werror_flag"
- 			 || test ! -s conftest.err'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; } &&
- 	 { ac_try='test -s conftest.$ac_objext'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; }; then
-   ac_header_compiler=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- ac_header_compiler=no
- fi
- rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
- echo "${ECHO_T}$ac_header_compiler" >&6
- 
- # Is the header present?
- echo "$as_me:$LINENO: checking netdb.h presence" >&5
- echo $ECHO_N "checking netdb.h presence... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- #include <netdb.h>
- _ACEOF
- if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } >/dev/null; then
-   if test -s conftest.err; then
-     ac_cpp_err=$ac_c_preproc_warn_flag
-     ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-   else
-     ac_cpp_err=
-   fi
- else
-   ac_cpp_err=yes
- fi
- if test -z "$ac_cpp_err"; then
-   ac_header_preproc=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
-   ac_header_preproc=no
- fi
- rm -f conftest.err conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
- echo "${ECHO_T}$ac_header_preproc" >&6
- 
- # So?  What about this header?
- case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-   yes:no: )
-     { echo "$as_me:$LINENO: WARNING: netdb.h: accepted by the compiler, rejected by the preprocessor!" >&5
- echo "$as_me: WARNING: netdb.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netdb.h: proceeding with the compiler's result" >&5
- echo "$as_me: WARNING: netdb.h: proceeding with the compiler's result" >&2;}
-     ac_header_preproc=yes
-     ;;
-   no:yes:* )
-     { echo "$as_me:$LINENO: WARNING: netdb.h: present but cannot be compiled" >&5
- echo "$as_me: WARNING: netdb.h: present but cannot be compiled" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netdb.h:     check for missing prerequisite headers?" >&5
- echo "$as_me: WARNING: netdb.h:     check for missing prerequisite headers?" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netdb.h: see the Autoconf documentation" >&5
- echo "$as_me: WARNING: netdb.h: see the Autoconf documentation" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netdb.h:     section \"Present But Cannot Be Compiled\"" >&5
- echo "$as_me: WARNING: netdb.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netdb.h: proceeding with the preprocessor's result" >&5
- echo "$as_me: WARNING: netdb.h: proceeding with the preprocessor's result" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netdb.h: in the future, the compiler will take precedence" >&5
- echo "$as_me: WARNING: netdb.h: in the future, the compiler will take precedence" >&2;}
-     (
-       cat <<\_ASBOX
- ## ------------------------------------------ ##
- ## Report this to the AC_PACKAGE_NAME lists.  ##
- ## ------------------------------------------ ##
- _ASBOX
-     ) |
-       sed "s/^/$as_me: WARNING:     /" >&2
-     ;;
- esac
- echo "$as_me:$LINENO: checking for netdb.h" >&5
- echo $ECHO_N "checking for netdb.h... $ECHO_C" >&6
- if test "${ac_cv_header_netdb_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- else
-   ac_cv_header_netdb_h=$ac_header_preproc
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_netdb_h" >&5
- echo "${ECHO_T}$ac_cv_header_netdb_h" >&6
- 
- fi
- if test $ac_cv_header_netdb_h = yes; then
-   :
- else
-   { { echo "$as_me:$LINENO: error: \"*** no netdb.h\"" >&5
- echo "$as_me: error: \"*** no netdb.h\"" >&2;}
-    { (exit 1); exit 1; }; }
- fi
- 
- 
- if test "${ac_cv_header_netinet_in_h+set}" = set; then
-   echo "$as_me:$LINENO: checking for netinet/in.h" >&5
- echo $ECHO_N "checking for netinet/in.h... $ECHO_C" >&6
- if test "${ac_cv_header_netinet_in_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_netinet_in_h" >&5
- echo "${ECHO_T}$ac_cv_header_netinet_in_h" >&6
- else
-   # Is the header compilable?
- echo "$as_me:$LINENO: checking netinet/in.h usability" >&5
- echo $ECHO_N "checking netinet/in.h usability... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- $ac_includes_default
- #include <netinet/in.h>
- _ACEOF
- rm -f conftest.$ac_objext
- if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-   (eval $ac_compile) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } &&
- 	 { ac_try='test -z "$ac_c_werror_flag"
- 			 || test ! -s conftest.err'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; } &&
- 	 { ac_try='test -s conftest.$ac_objext'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; }; then
-   ac_header_compiler=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- ac_header_compiler=no
- fi
- rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
- echo "${ECHO_T}$ac_header_compiler" >&6
- 
- # Is the header present?
- echo "$as_me:$LINENO: checking netinet/in.h presence" >&5
- echo $ECHO_N "checking netinet/in.h presence... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- #include <netinet/in.h>
- _ACEOF
- if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } >/dev/null; then
-   if test -s conftest.err; then
-     ac_cpp_err=$ac_c_preproc_warn_flag
-     ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-   else
-     ac_cpp_err=
-   fi
- else
-   ac_cpp_err=yes
- fi
- if test -z "$ac_cpp_err"; then
-   ac_header_preproc=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
-   ac_header_preproc=no
- fi
- rm -f conftest.err conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
- echo "${ECHO_T}$ac_header_preproc" >&6
- 
- # So?  What about this header?
- case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-   yes:no: )
-     { echo "$as_me:$LINENO: WARNING: netinet/in.h: accepted by the compiler, rejected by the preprocessor!" >&5
- echo "$as_me: WARNING: netinet/in.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/in.h: proceeding with the compiler's result" >&5
- echo "$as_me: WARNING: netinet/in.h: proceeding with the compiler's result" >&2;}
-     ac_header_preproc=yes
-     ;;
-   no:yes:* )
-     { echo "$as_me:$LINENO: WARNING: netinet/in.h: present but cannot be compiled" >&5
- echo "$as_me: WARNING: netinet/in.h: present but cannot be compiled" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/in.h:     check for missing prerequisite headers?" >&5
- echo "$as_me: WARNING: netinet/in.h:     check for missing prerequisite headers?" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/in.h: see the Autoconf documentation" >&5
- echo "$as_me: WARNING: netinet/in.h: see the Autoconf documentation" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/in.h:     section \"Present But Cannot Be Compiled\"" >&5
- echo "$as_me: WARNING: netinet/in.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/in.h: proceeding with the preprocessor's result" >&5
- echo "$as_me: WARNING: netinet/in.h: proceeding with the preprocessor's result" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/in.h: in the future, the compiler will take precedence" >&5
- echo "$as_me: WARNING: netinet/in.h: in the future, the compiler will take precedence" >&2;}
-     (
-       cat <<\_ASBOX
- ## ------------------------------------------ ##
- ## Report this to the AC_PACKAGE_NAME lists.  ##
- ## ------------------------------------------ ##
- _ASBOX
-     ) |
-       sed "s/^/$as_me: WARNING:     /" >&2
-     ;;
- esac
- echo "$as_me:$LINENO: checking for netinet/in.h" >&5
- echo $ECHO_N "checking for netinet/in.h... $ECHO_C" >&6
- if test "${ac_cv_header_netinet_in_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- else
-   ac_cv_header_netinet_in_h=$ac_header_preproc
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_netinet_in_h" >&5
- echo "${ECHO_T}$ac_cv_header_netinet_in_h" >&6
- 
- fi
- if test $ac_cv_header_netinet_in_h = yes; then
-   :
- else
-   { { echo "$as_me:$LINENO: error: \"*** no netinet/in.h\"" >&5
- echo "$as_me: error: \"*** no netinet/in.h\"" >&2;}
-    { (exit 1); exit 1; }; }
- fi
- 
- 
- if test "${ac_cv_header_netinet_tcp_h+set}" = set; then
-   echo "$as_me:$LINENO: checking for netinet/tcp.h" >&5
- echo $ECHO_N "checking for netinet/tcp.h... $ECHO_C" >&6
- if test "${ac_cv_header_netinet_tcp_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_netinet_tcp_h" >&5
- echo "${ECHO_T}$ac_cv_header_netinet_tcp_h" >&6
- else
-   # Is the header compilable?
- echo "$as_me:$LINENO: checking netinet/tcp.h usability" >&5
- echo $ECHO_N "checking netinet/tcp.h usability... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- $ac_includes_default
- #include <netinet/tcp.h>
- _ACEOF
- rm -f conftest.$ac_objext
- if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-   (eval $ac_compile) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } &&
- 	 { ac_try='test -z "$ac_c_werror_flag"
- 			 || test ! -s conftest.err'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; } &&
- 	 { ac_try='test -s conftest.$ac_objext'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; }; then
-   ac_header_compiler=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- ac_header_compiler=no
- fi
- rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
- echo "${ECHO_T}$ac_header_compiler" >&6
- 
- # Is the header present?
- echo "$as_me:$LINENO: checking netinet/tcp.h presence" >&5
- echo $ECHO_N "checking netinet/tcp.h presence... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- #include <netinet/tcp.h>
- _ACEOF
- if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } >/dev/null; then
-   if test -s conftest.err; then
-     ac_cpp_err=$ac_c_preproc_warn_flag
-     ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-   else
-     ac_cpp_err=
-   fi
- else
-   ac_cpp_err=yes
- fi
- if test -z "$ac_cpp_err"; then
-   ac_header_preproc=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
-   ac_header_preproc=no
- fi
- rm -f conftest.err conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
- echo "${ECHO_T}$ac_header_preproc" >&6
- 
- # So?  What about this header?
- case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-   yes:no: )
-     { echo "$as_me:$LINENO: WARNING: netinet/tcp.h: accepted by the compiler, rejected by the preprocessor!" >&5
- echo "$as_me: WARNING: netinet/tcp.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/tcp.h: proceeding with the compiler's result" >&5
- echo "$as_me: WARNING: netinet/tcp.h: proceeding with the compiler's result" >&2;}
-     ac_header_preproc=yes
-     ;;
-   no:yes:* )
-     { echo "$as_me:$LINENO: WARNING: netinet/tcp.h: present but cannot be compiled" >&5
- echo "$as_me: WARNING: netinet/tcp.h: present but cannot be compiled" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/tcp.h:     check for missing prerequisite headers?" >&5
- echo "$as_me: WARNING: netinet/tcp.h:     check for missing prerequisite headers?" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/tcp.h: see the Autoconf documentation" >&5
- echo "$as_me: WARNING: netinet/tcp.h: see the Autoconf documentation" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/tcp.h:     section \"Present But Cannot Be Compiled\"" >&5
- echo "$as_me: WARNING: netinet/tcp.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/tcp.h: proceeding with the preprocessor's result" >&5
- echo "$as_me: WARNING: netinet/tcp.h: proceeding with the preprocessor's result" >&2;}
-     { echo "$as_me:$LINENO: WARNING: netinet/tcp.h: in the future, the compiler will take precedence" >&5
- echo "$as_me: WARNING: netinet/tcp.h: in the future, the compiler will take precedence" >&2;}
-     (
-       cat <<\_ASBOX
- ## ------------------------------------------ ##
- ## Report this to the AC_PACKAGE_NAME lists.  ##
- ## ------------------------------------------ ##
- _ASBOX
-     ) |
-       sed "s/^/$as_me: WARNING:     /" >&2
-     ;;
- esac
- echo "$as_me:$LINENO: checking for netinet/tcp.h" >&5
- echo $ECHO_N "checking for netinet/tcp.h... $ECHO_C" >&6
- if test "${ac_cv_header_netinet_tcp_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- else
-   ac_cv_header_netinet_tcp_h=$ac_header_preproc
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_netinet_tcp_h" >&5
- echo "${ECHO_T}$ac_cv_header_netinet_tcp_h" >&6
- 
- fi
- if test $ac_cv_header_netinet_tcp_h = yes; then
-   :
- else
-   { { echo "$as_me:$LINENO: error: \"*** no netinet/tcp.h\"" >&5
- echo "$as_me: error: \"*** no netinet/tcp.h\"" >&2;}
-    { (exit 1); exit 1; }; }
- fi
- 
- 
  if test "${ac_cv_header_sys_param_h+set}" = set; then
    echo "$as_me:$LINENO: checking for sys/param.h" >&5
  echo $ECHO_N "checking for sys/param.h... $ECHO_C" >&6
--- 20719,20724 ----
***************
*** 21303,21454 ****
  fi
  
  
- if test "${ac_cv_header_sys_socket_h+set}" = set; then
-   echo "$as_me:$LINENO: checking for sys/socket.h" >&5
- echo $ECHO_N "checking for sys/socket.h... $ECHO_C" >&6
- if test "${ac_cv_header_sys_socket_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_sys_socket_h" >&5
- echo "${ECHO_T}$ac_cv_header_sys_socket_h" >&6
- else
-   # Is the header compilable?
- echo "$as_me:$LINENO: checking sys/socket.h usability" >&5
- echo $ECHO_N "checking sys/socket.h usability... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- $ac_includes_default
- #include <sys/socket.h>
- _ACEOF
- rm -f conftest.$ac_objext
- if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-   (eval $ac_compile) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } &&
- 	 { ac_try='test -z "$ac_c_werror_flag"
- 			 || test ! -s conftest.err'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; } &&
- 	 { ac_try='test -s conftest.$ac_objext'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; }; then
-   ac_header_compiler=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- ac_header_compiler=no
- fi
- rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
- echo "${ECHO_T}$ac_header_compiler" >&6
- 
- # Is the header present?
- echo "$as_me:$LINENO: checking sys/socket.h presence" >&5
- echo $ECHO_N "checking sys/socket.h presence... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- #include <sys/socket.h>
- _ACEOF
- if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } >/dev/null; then
-   if test -s conftest.err; then
-     ac_cpp_err=$ac_c_preproc_warn_flag
-     ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-   else
-     ac_cpp_err=
-   fi
- else
-   ac_cpp_err=yes
- fi
- if test -z "$ac_cpp_err"; then
-   ac_header_preproc=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
-   ac_header_preproc=no
- fi
- rm -f conftest.err conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
- echo "${ECHO_T}$ac_header_preproc" >&6
- 
- # So?  What about this header?
- case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-   yes:no: )
-     { echo "$as_me:$LINENO: WARNING: sys/socket.h: accepted by the compiler, rejected by the preprocessor!" >&5
- echo "$as_me: WARNING: sys/socket.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/socket.h: proceeding with the compiler's result" >&5
- echo "$as_me: WARNING: sys/socket.h: proceeding with the compiler's result" >&2;}
-     ac_header_preproc=yes
-     ;;
-   no:yes:* )
-     { echo "$as_me:$LINENO: WARNING: sys/socket.h: present but cannot be compiled" >&5
- echo "$as_me: WARNING: sys/socket.h: present but cannot be compiled" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/socket.h:     check for missing prerequisite headers?" >&5
- echo "$as_me: WARNING: sys/socket.h:     check for missing prerequisite headers?" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/socket.h: see the Autoconf documentation" >&5
- echo "$as_me: WARNING: sys/socket.h: see the Autoconf documentation" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/socket.h:     section \"Present But Cannot Be Compiled\"" >&5
- echo "$as_me: WARNING: sys/socket.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/socket.h: proceeding with the preprocessor's result" >&5
- echo "$as_me: WARNING: sys/socket.h: proceeding with the preprocessor's result" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/socket.h: in the future, the compiler will take precedence" >&5
- echo "$as_me: WARNING: sys/socket.h: in the future, the compiler will take precedence" >&2;}
-     (
-       cat <<\_ASBOX
- ## ------------------------------------------ ##
- ## Report this to the AC_PACKAGE_NAME lists.  ##
- ## ------------------------------------------ ##
- _ASBOX
-     ) |
-       sed "s/^/$as_me: WARNING:     /" >&2
-     ;;
- esac
- echo "$as_me:$LINENO: checking for sys/socket.h" >&5
- echo $ECHO_N "checking for sys/socket.h... $ECHO_C" >&6
- if test "${ac_cv_header_sys_socket_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- else
-   ac_cv_header_sys_socket_h=$ac_header_preproc
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_sys_socket_h" >&5
- echo "${ECHO_T}$ac_cv_header_sys_socket_h" >&6
- 
- fi
- if test $ac_cv_header_sys_socket_h = yes; then
-   :
- else
-   { { echo "$as_me:$LINENO: error: \"*** no sys/socket.h\"" >&5
- echo "$as_me: error: \"*** no sys/socket.h\"" >&2;}
-    { (exit 1); exit 1; }; }
- fi
- 
- 
  if test "${ac_cv_header_sys_time_h+set}" = set; then
    echo "$as_me:$LINENO: checking for sys/time.h" >&5
  echo $ECHO_N "checking for sys/time.h... $ECHO_C" >&6
--- 20865,20870 ----
***************
*** 21595,21746 ****
  fi
  
  
- if test "${ac_cv_header_sys_un_h+set}" = set; then
-   echo "$as_me:$LINENO: checking for sys/un.h" >&5
- echo $ECHO_N "checking for sys/un.h... $ECHO_C" >&6
- if test "${ac_cv_header_sys_un_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_sys_un_h" >&5
- echo "${ECHO_T}$ac_cv_header_sys_un_h" >&6
- else
-   # Is the header compilable?
- echo "$as_me:$LINENO: checking sys/un.h usability" >&5
- echo $ECHO_N "checking sys/un.h usability... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- $ac_includes_default
- #include <sys/un.h>
- _ACEOF
- rm -f conftest.$ac_objext
- if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-   (eval $ac_compile) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } &&
- 	 { ac_try='test -z "$ac_c_werror_flag"
- 			 || test ! -s conftest.err'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; } &&
- 	 { ac_try='test -s conftest.$ac_objext'
-   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-   (eval $ac_try) 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }; }; then
-   ac_header_compiler=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- ac_header_compiler=no
- fi
- rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
- echo "${ECHO_T}$ac_header_compiler" >&6
- 
- # Is the header present?
- echo "$as_me:$LINENO: checking sys/un.h presence" >&5
- echo $ECHO_N "checking sys/un.h presence... $ECHO_C" >&6
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- #include <sys/un.h>
- _ACEOF
- if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } >/dev/null; then
-   if test -s conftest.err; then
-     ac_cpp_err=$ac_c_preproc_warn_flag
-     ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-   else
-     ac_cpp_err=
-   fi
- else
-   ac_cpp_err=yes
- fi
- if test -z "$ac_cpp_err"; then
-   ac_header_preproc=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
-   ac_header_preproc=no
- fi
- rm -f conftest.err conftest.$ac_ext
- echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
- echo "${ECHO_T}$ac_header_preproc" >&6
- 
- # So?  What about this header?
- case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-   yes:no: )
-     { echo "$as_me:$LINENO: WARNING: sys/un.h: accepted by the compiler, rejected by the preprocessor!" >&5
- echo "$as_me: WARNING: sys/un.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/un.h: proceeding with the compiler's result" >&5
- echo "$as_me: WARNING: sys/un.h: proceeding with the compiler's result" >&2;}
-     ac_header_preproc=yes
-     ;;
-   no:yes:* )
-     { echo "$as_me:$LINENO: WARNING: sys/un.h: present but cannot be compiled" >&5
- echo "$as_me: WARNING: sys/un.h: present but cannot be compiled" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/un.h:     check for missing prerequisite headers?" >&5
- echo "$as_me: WARNING: sys/un.h:     check for missing prerequisite headers?" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/un.h: see the Autoconf documentation" >&5
- echo "$as_me: WARNING: sys/un.h: see the Autoconf documentation" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/un.h:     section \"Present But Cannot Be Compiled\"" >&5
- echo "$as_me: WARNING: sys/un.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/un.h: proceeding with the preprocessor's result" >&5
- echo "$as_me: WARNING: sys/un.h: proceeding with the preprocessor's result" >&2;}
-     { echo "$as_me:$LINENO: WARNING: sys/un.h: in the future, the compiler will take precedence" >&5
- echo "$as_me: WARNING: sys/un.h: in the future, the compiler will take precedence" >&2;}
-     (
-       cat <<\_ASBOX
- ## ------------------------------------------ ##
- ## Report this to the AC_PACKAGE_NAME lists.  ##
- ## ------------------------------------------ ##
- _ASBOX
-     ) |
-       sed "s/^/$as_me: WARNING:     /" >&2
-     ;;
- esac
- echo "$as_me:$LINENO: checking for sys/un.h" >&5
- echo $ECHO_N "checking for sys/un.h... $ECHO_C" >&6
- if test "${ac_cv_header_sys_un_h+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- else
-   ac_cv_header_sys_un_h=$ac_header_preproc
- fi
- echo "$as_me:$LINENO: result: $ac_cv_header_sys_un_h" >&5
- echo "${ECHO_T}$ac_cv_header_sys_un_h" >&6
- 
- fi
- if test $ac_cv_header_sys_un_h = yes; then
-   :
- else
-   { { echo "$as_me:$LINENO: error: \"*** no sys/un.h\"" >&5
- echo "$as_me: error: \"*** no sys/un.h\"" >&2;}
-    { (exit 1); exit 1; }; }
- fi
- 
- 
  if test "${ac_cv_header_unistd_h+set}" = set; then
    echo "$as_me:$LINENO: checking for unistd.h" >&5
  echo $ECHO_N "checking for unistd.h... $ECHO_C" >&6
--- 21011,21016 ----
diff -rc toolbuslib-1.1/src/atb-tool.c toolbuslib-1.1-new/src/atb-tool.c
*** toolbuslib-1.1/src/atb-tool.c	2008-11-10 13:59:41.000000000 +0100
--- toolbuslib-1.1-new/src/atb-tool.c	2010-08-23 16:58:11.000000000 +0200
***************
*** 6,22 ****
  #include <stdlib.h> 
  #include <unistd.h>
  #include <errno.h>
- #include <netdb.h>
- #include <sys/socket.h>
  #include <sys/time.h>
- #include <sys/un.h>
  #include <sys/param.h>
- #include <netinet/in.h>
- #include <netinet/tcp.h>
  #include <signal.h>
  #include <string.h>
! 
! #include <sys/resource.h>
  
  #include <aterm2.h>
  #include "safio.h"
--- 6,16 ----
  #include <stdlib.h> 
  #include <unistd.h>
  #include <errno.h>
  #include <sys/time.h>
  #include <sys/param.h>
  #include <signal.h>
  #include <string.h>
! #include <winsock2.h>
  
  #include <aterm2.h>
  #include "safio.h"
***************
*** 39,44 ****
--- 33,40 ----
  #define MAX_NR_QUEUES	64
  #define MAX_QUEUE_LEN	128
  
+ #define MAXHOSTNAMELEN 256
+ 
  /* Operation codes. */
  /* From Tool to ToolBus. */
  #define CONNECT 1
***************
*** 144,151 ****
   * Gathers performance stats. 
   */
  static ATerm getPerformanceStats(){
- 	struct rusage resourceUsage;
- 	
  	// Type stuff
  	ATerm remote = (ATerm) ATmakeAppl0(ATmakeAFun("remote", 0, ATtrue));
  	ATerm toolType = (ATerm) ATmakeAppl1(ATmakeAFun("type", 1, ATfalse), remote);
--- 140,145 ----
***************
*** 161,171 ****
  	// Thread stuff
  	ATerm threads;
  	
- 	getrusage(RUSAGE_SELF, &resourceUsage);
- 	
  	{
! 		int userTime = (int) (resourceUsage.ru_utime.tv_sec * 1000) + (resourceUsage.ru_utime.tv_usec / 1000);
! 		int systemTime = (int) (resourceUsage.ru_stime.tv_sec * 1000) + (resourceUsage.ru_stime.tv_usec / 1000);
  		
  		ATerm userTimeTerm = (ATerm) ATmakeAppl1(ATmakeAFun("user-time", 1, ATfalse), (ATerm) ATmakeInt(userTime));
  		ATerm systemTimeTerm = (ATerm) ATmakeAppl1(ATmakeAFun("system-time", 1, ATfalse), (ATerm) ATmakeInt(systemTime));
--- 155,163 ----
  	// Thread stuff
  	ATerm threads;
  	
  	{
! 		int userTime = 0;
! 		int systemTime = 0;
  		
  		ATerm userTimeTerm = (ATerm) ATmakeAppl1(ATmakeAFun("user-time", 1, ATfalse), (ATerm) ATmakeInt(userTime));
  		ATerm systemTimeTerm = (ATerm) ATmakeAppl1(ATmakeAFun("system-time", 1, ATfalse), (ATerm) ATmakeInt(systemTime));
***************
*** 349,364 ****
    
    otp = (OperationTermPair) malloc(sizeof(struct _OperationTermPair));
  
-   /* Initialize handlers for OS signals */
-   {
-     struct sigaction disconnect;
-     disconnect.sa_handler = disconnectHandler;
-     sigemptyset(&disconnect.sa_mask);
- 
-     sigaction(SIGTERM, &disconnect, NULL);
-     sigaction(SIGQUIT, &disconnect, NULL);
-   }
- 
    /* Get hostname of machine that runs this particular tool */
    return gethostname(this_host, MAXHOSTNAMELEN);
  }
--- 341,346 ----
diff -rc toolbuslib-1.1/src/Makefile.in toolbuslib-1.1-new/src/Makefile.in
*** toolbuslib-1.1/src/Makefile.in	2008-11-10 13:59:47.000000000 +0100
--- toolbuslib-1.1-new/src/Makefile.in	2010-08-24 10:28:10.000000000 +0200
***************
*** 223,234 ****
  libATB_la_SOURCES = atb-tool.c
  libATB_la_CPPFLAGS = $(ATERM_CFLAGS)
  libATB_la_LDFLAGS = -avoid-version -no-undefined $(AM_LDFLAGS)
! libATB_la_LIBADD = $(ATERM_LIBS) $(SOCKETLIBS)
  
  bin_PROGRAMS = tbunpack
  
  tbunpack_SOURCES = tbunpack.c atb-tool.c
! tbunpack_LDADD = $(ATERM_LIBS)
  subdir = ./src
  ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
  mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
--- 223,234 ----
  libATB_la_SOURCES = atb-tool.c
  libATB_la_CPPFLAGS = $(ATERM_CFLAGS)
  libATB_la_LDFLAGS = -avoid-version -no-undefined $(AM_LDFLAGS)
! libATB_la_LIBADD = $(ATERM_LIBS) $(SOCKETLIBS) -lwsock32
  
  bin_PROGRAMS = tbunpack
  
  tbunpack_SOURCES = tbunpack.c atb-tool.c
! tbunpack_LDADD = $(ATERM_LIBS) -lwsock32
  subdir = ./src
  ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
  mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
