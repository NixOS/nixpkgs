{ 
  lib, 
  stdenv, 
  fetchFromGitHub, 
  cmake, 
  zsh,
  vim,
  makeWrapper
}:

stdenv.mkDerivation (finalAttrs: {
  pname = "zenroom";
  version = "3.5.0";

  src = fetchFromGitHub {
    owner = "dyne";
    repo = "Zenroom";
    rev = "af36d717a611445eb88a2234be267802afe7cd88";
    sha256 = "m+E65xPERBkBtPjNyzEx1J4WSwysa9LVRd4bnhYvT8c=";
  };

  nativeBuildInputs = [ cmake makeWrapper ];
  buildInputs = [ zsh vim ];

  meta = with lib; {
    homepage = "https://zenroom.org/";
    description = "Crypto smart-contract executor.";
    longDescription = ''
       Zenroom is a tiny secure execution environment that integrates in any 
       platform and application, even on a chip or a web page. 
       It can authenticate, authorize access and execute human-readable 
       smart contracts for blockchains, databases and much more. 
       It helps to develop cryptography keeping it simple, understandable and 
       maintainable.	
    '';
    license = licenses.agpl3Plus;
    maintainers = with maintainers; [ jacksmithinsulander ];
    mainProgram = finalAttrs.pname;
    platforms = platforms.linux;
  };
})
