# https://codeberg.org/Calamares/calamares/src/branch/calamares/src/modules/mount/mount.conf
extraMounts:
    - device: proc
      fs: proc
      mountPoint: /proc
    - device: sys
      fs: sysfs
      mountPoint: /sys
    - device: /dev
      mountPoint: /dev
      options: [ bind ]
    - device: tmpfs
      fs: tmpfs
      mountPoint: /run
    - device: /run/udev
      mountPoint: /run/udev
      options: [ bind ]
    - device: efivarfs
      fs: efivarfs
      mountPoint: /sys/firmware/efi/efivars
      efi: true

# Btrfs subvolume layout for NixOS
# Empty subvolume for / means no subvolume (top-level) for GRUB compatibility
btrfsSubvolumes:
    - mountPoint: /
      subvolume: ""
    - mountPoint: /home
      subvolume: /home
    - mountPoint: /nix
      subvolume: /nix

# Mount options by filesystem type
# nixos-generate-config picks these up for hardware-configuration.nix
mountOptions:
    - filesystem: efi
      options: [ fmask=0077, dmask=0077 ]
    - filesystem: btrfs
      options: [ compress=zstd, noatime ]
