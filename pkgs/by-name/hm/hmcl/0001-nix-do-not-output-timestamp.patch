From 9354a6286f9cc3cc7f9ffcd7f0be53321a5f6d1a Mon Sep 17 00:00:00 2001
From: Moraxyc <i@qaq.li>
Date: Wed, 29 Oct 2025 00:08:35 +0800
Subject: [PATCH 1/2] nix: do not output timestamp

---
 .../hmcl/gradle/l10n/UpsideDownTranslate.java          | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/buildSrc/src/main/java/org/jackhuang/hmcl/gradle/l10n/UpsideDownTranslate.java b/buildSrc/src/main/java/org/jackhuang/hmcl/gradle/l10n/UpsideDownTranslate.java
index 74507c9e2..10c541f55 100644
--- a/buildSrc/src/main/java/org/jackhuang/hmcl/gradle/l10n/UpsideDownTranslate.java
+++ b/buildSrc/src/main/java/org/jackhuang/hmcl/gradle/l10n/UpsideDownTranslate.java
@@ -27,6 +27,7 @@ import org.jackhuang.hmcl.gradle.utils.PropertiesUtils;
 
 import java.io.IOException;
 import java.io.InputStream;
+import java.io.StringWriter;
 import java.nio.charset.StandardCharsets;
 import java.nio.file.Files;
 import java.nio.file.Path;
@@ -67,8 +68,15 @@ public abstract class UpsideDownTranslate extends DefaultTask {
         });
 
         Files.createDirectories(outputFile.getParent());
+
+        StringWriter sw = new StringWriter();
+        output.store(sw, null);
+        String result = sw.toString().lines()
+            .skip(1)
+            .reduce((a, b) -> a + System.lineSeparator() + b)
+            .orElse("");
         try (var writer = Files.newBufferedWriter(outputFile)) {
-            output.store(writer, "This file is automatically generated, please do not modify it manually");
+            writer.write(result);
         }
     }
 
-- 
2.51.0

