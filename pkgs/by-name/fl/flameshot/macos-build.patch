--- a/src/CMakeLists.txt	2025-08-12 16:34:27
+++ b/src/CMakeLists.txt	2025-08-15 11:45:56
@@ -220,7 +220,7 @@
 
   target_link_libraries(
           flameshot
-          kdsingleapplication
+          kdsingleapplication-qt6
   )
 endif()
 
@@ -447,64 +447,3 @@
     endif ()
 endif ()
 
-# macdeployqt
-if (APPLE)
-# Code signing settings - optional, set to empty string to skip signing
-    set(CODE_SIGN_IDENTITY "" CACHE STRING "Code signing identity (leave empty to skip signing)")
-    set(DMG_SIGN_IDENTITY "" CACHE STRING "DMG signing identity (leave empty to skip signing)")
-    # Custom target to create DMG (signed or unsigned)
-    add_custom_target(create_dmg
-    COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/../packaging/macos/create_dmg.sh 
-            "${CMAKE_CURRENT_BINARY_DIR}/Flameshot.app"
-            "${CMAKE_CURRENT_BINARY_DIR}/Flameshot-${PROJECT_VERSION}.dmg"
-            "${CODE_SIGN_IDENTITY}"
-            "${DMG_SIGN_IDENTITY}"
-    DEPENDS flameshot
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Creating DMG"
-    VERBATIM
-    )
-
-# Always sign the app bundle (either with identity or ad hoc)
-    if(CODE_SIGN_IDENTITY AND NOT CODE_SIGN_IDENTITY STREQUAL "")
-        # Identity-based signing (requires Developer ID)
-        add_custom_command(TARGET flameshot POST_BUILD
-            COMMAND codesign --force --deep --sign "${CODE_SIGN_IDENTITY}" 
-                    --options runtime --timestamp "$<TARGET_BUNDLE_DIR:flameshot>"
-            COMMENT "Code signing app bundle with ${CODE_SIGN_IDENTITY}"
-        )
-    else()
-        # Ad hoc signing 
-        add_custom_command(TARGET flameshot POST_BUILD
-            COMMAND codesign --force --deep --sign - "$<TARGET_BUNDLE_DIR:flameshot>"
-            COMMENT "Ad hoc code signing app bundle (no identity required)"
-        )
-    endif()
-   # Deploy Qt libraries and dependencies
-   find_program(MACDEPLOYQT_EXECUTABLE macdeployqt HINTS ${Qt6_DIR}/../../../bin)
-    
-   if(MACDEPLOYQT_EXECUTABLE)
-       add_custom_command(TARGET flameshot POST_BUILD
-           COMMAND ${MACDEPLOYQT_EXECUTABLE} "$<TARGET_BUNDLE_DIR:flameshot>" -verbose=2
-           COMMENT "Deploying Qt libraries"
-       )
-       
-       # Re-sign after macdeployqt (it modifies the bundle)
-       if(CODE_SIGN_IDENTITY AND NOT CODE_SIGN_IDENTITY STREQUAL "")
-           add_custom_command(TARGET flameshot POST_BUILD
-               COMMAND codesign --force --deep --sign "${CODE_SIGN_IDENTITY}" 
-                       --options runtime --timestamp "$<TARGET_BUNDLE_DIR:flameshot>"
-               COMMENT "Re-signing app bundle after Qt deployment"
-           )
-       else()
-           add_custom_command(TARGET flameshot POST_BUILD
-               COMMAND codesign --force --deep --sign - "$<TARGET_BUNDLE_DIR:flameshot>"
-               COMMENT "Re-signing app bundle after Qt deployment (ad hoc)"
-           )
-       endif()
-   else()
-       message(WARNING "macdeployqt not found. App may not run on systems without Qt installed.")
-   endif()
-
-
-endif ()
