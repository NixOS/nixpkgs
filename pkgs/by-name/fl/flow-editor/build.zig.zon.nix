# generated by zon2nix (https://github.com/Cloudef/zig2nix)

{
  lib,
  linkFarm,
  fetchurl,
  fetchgit,
  runCommandLocal,
  zig,
  name ? "zig-packages",
}:

with builtins;
with lib;

let
  unpackZigArtifact =
    { name, artifact }:
    runCommandLocal name
      {
        nativeBuildInputs = [ zig ];
      }
      ''
        hash="$(zig fetch --global-cache-dir "$TMPDIR" ${artifact})"
        mv "$TMPDIR/p/$hash" "$out"
        chmod 755 "$out"
      '';

  fetchZig =
    {
      name,
      url,
      hash,
    }:
    let
      artifact = fetchurl { inherit url hash; };
    in
    unpackZigArtifact { inherit name artifact; };

  fetchGitZig =
    {
      name,
      url,
      hash,
    }:
    let
      parts = splitString "#" url;
      url_base = elemAt parts 0;
      url_without_query = elemAt (splitString "?" url_base) 0;
      rev_base = elemAt parts 1;
      rev = if match "^[a-fA-F0-9]{40}$" rev_base != null then rev_base else "refs/heads/${rev_base}";
    in
    fetchgit {
      inherit name rev hash;
      url = url_without_query;
      deepClone = false;
    };

  fetchZigArtifact =
    {
      name,
      url,
      hash,
    }:
    let
      parts = splitString "://" url;
      proto = elemAt parts 0;
      path = elemAt parts 1;
      fetcher = {
        "git+http" = fetchGitZig {
          inherit name hash;
          url = "http://${path}";
        };
        "git+https" = fetchGitZig {
          inherit name hash;
          url = "https://${path}";
        };
        http = fetchZig {
          inherit name hash;
          url = "http://${path}";
        };
        https = fetchZig {
          inherit name hash;
          url = "https://${path}";
        };
      };
    in
    fetcher.${proto};
in
linkFarm name [
  {
    name = "1220930a42f8da3fb7f723e3ad3f6dcc6db76327dd8d26274566423192d53e91b2bb";
    path = fetchZigArtifact {
      name = "flags";
      url = "https://github.com/n0s4/flags/archive/b3905aa990719ff567f1c5a2f89e6dd3292d8533.tar.gz";
      hash = "sha256-2lN2goQgjU5Hf18tvDV/csS83A20nA9Iu2/fKXtpZok=";
    };
  }
  {
    name = "1220a2c8f8db1b5265458ac967ea1f7cc0a8ddcd1d774df3b73d86c4f529aadbfb94";
    path = fetchZigArtifact {
      name = "tracy";
      url = "https://github.com/neurocyte/zig-tracy/archive/58999b786089e5319dd0707f6afbfca04c6340e7.tar.gz";
      hash = "sha256-4q1UD2hRtp9mUPL5wIKzk8AhnAoVkl9xpaUN5sp4mWA=";
    };
  }
  {
    name = "12202aac930cebaf2b57f443cacc2483478580a72f1316b4f0a720ddd91246fce69d";
    path = fetchZigArtifact {
      name = "tracy_src";
      url = "https://github.com/wolfpld/tracy/archive/refs/tags/v0.10.tar.gz";
      hash = "sha256-p2AX2Sjz8nJ1QPuVDt07c2yql7Etu05e3OZlQsvqZgA=";
    };
  }
  {
    name = "1220220dbc7fe91c1c54438193ca765cebbcb7d58f35cdcaee404a9d2245a42a4362";
    path = fetchZigArtifact {
      name = "dizzy";
      url = "https://github.com/neurocyte/dizzy/archive/455d18369cbb2a0458ba70be919cd378338d695e.tar.gz";
      hash = "sha256-PKCqS8/sEieEA3ZONEsBHq+am02JRHG9waYzn2GnYgI=";
    };
  }
  {
    name = "1220f6fdc977fff899aaf624afc8cf01e29a0e100dbb52860902a3bc256f4ddd687b";
    path = fetchZigArtifact {
      name = "thespian";
      url = "https://github.com/neurocyte/thespian/archive/9df7beb192dd0db647e55fe44272b77ca687f6cd.tar.gz";
      hash = "sha256-b8PPqmiURT9bOaa2ubz/v0J2WEyRmtL6iL4nBDkvgeQ=";
    };
  }
  {
    name = "1220c85e0d9438ec518849c84e3ea66633a0e191e49c4ae4bbb3bc46626cd8dfad75";
    path = fetchZigArtifact {
      name = "asio";
      url = "https://github.com/neurocyte/asio/archive/b9c9c23ef2e6f11b6123535ec33e5a23ed0c59da.tar.gz";
      hash = "sha256-tD9lxE6RRAptBE9suZA4ANpT5x/B3e4YINay9Se78XY=";
    };
  }
  {
    name = "1220b2109e0aadf85e4ac5e1cd084e321fe50f1e59cea690c022a7a8f7eb6021eadb";
    path = fetchZigArtifact {
      name = "themes";
      url = "https://github.com/neurocyte/flow-themes/releases/download/master-0c2a187c604c63031225847a966b6ca279b2be91/flow-themes.tar.gz";
      hash = "sha256-8zumZneeSPVrpw2wAQwKoEOXCLYqkKQFVXQ8oum08Hw=";
    };
  }
  {
    name = "122019f077d09686b1ec47928ca2b4bf264422f3a27afc5b49dafb0129a4ceca0d01";
    path = fetchZigArtifact {
      name = "fuzzig";
      url = "https://github.com/fjebaker/fuzzig/archive/0fd156d5097365151e85a85eef9d8cf0eebe7b00.tar.gz";
      hash = "sha256-XVOKqHX2X8HvRDJgnqVEPN/A0hFvCk8Fgsss0CKInYQ=";
    };
  }
  {
    name = "12202ee9842d28927674e552f1ea41e2c41e59f6b4b5d290de9b6fd626fd332ac627";
    path = fetchZigArtifact {
      name = "vaxis";
      url = "https://github.com/neurocyte/libvaxis/archive/ffe35b4342bd2913efd46c35c0ccd15544ac87e6.tar.gz";
      hash = "sha256-AQpYS1WnHLzcUMhD8BaCd+Dh+nqY5umL6KCBTuVlSQw=";
    };
  }
  {
    name = "1220dd654ef941fc76fd96f9ec6adadf83f69b9887a0d3f4ee5ac0a1a3e11be35cf5";
    path = fetchZigArtifact {
      name = "zigimg";
      url = "git+https://github.com/zigimg/zigimg#3a667bdb3d7f0955a5a51c8468eac83210c1439e";
      hash = "sha256-oLf3YH3yeg4ikVO/GahMCDRMTU31AHkfSnF4rt7xTKo=";
    };
  }
  {
    name = "122055beff332830a391e9895c044d33b15ea21063779557024b46169fb1984c6e40";
    path = fetchZigArtifact {
      name = "zg";
      url = "https://github.com/neurocyte/zg/archive/refs/tags/v0.13.2.tar.gz";
      hash = "sha256-Hd8HlYEkkA/2BLW+4d/0Ibw7r7U533us3n2QR+XG/PQ=";
    };
  }
  {
    name = "1220755ea2a5aa6bb3713437aaafefd44812169fe43f1da755c3ee6101b85940f441";
    path = fetchZigArtifact {
      name = "zeit";
      url = "https://github.com/rockorager/zeit/archive/9cca8ec620a54c3b07cd249f25e5bcb3153d03d7.tar.gz";
      hash = "sha256-4bxyQKbVUtYzZixUq2d+iiSPGkcwg+dG4WLaDYYQzn8=";
    };
  }
  {
    name = "12204c99c6093230023380068f386f7eb32ab83df9a8eb8b586ffe5aa44afa34ff0e";
    path = fetchZigArtifact {
      name = "tree-sitter";
      url = "https://github.com/neurocyte/tree-sitter/releases/download/master-aea6072c6178d5cd0c97fff33e130f632f355bc2/source.tar.gz";
      hash = "sha256-eqJc3lx+tnbiqcD8R0u4+sH7wKOr4McYiZNUfPTNbRc=";
    };
  }
]
