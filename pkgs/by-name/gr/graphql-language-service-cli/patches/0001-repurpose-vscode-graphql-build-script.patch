From b3b87e77ad047919291d825f19951884af52bb84 Mon Sep 17 00:00:00 2001
From: Nathan Regner <nathanregner@gmail.com>
Date: Tue, 15 Jul 2025 22:17:04 -0600
Subject: [PATCH] Repurpose vscode-graphql build script

Bundling the output script means we don't have to ship 1GB of
`node_modules` (there are lots of unrelated dependencies used by other
packages in the monorepo).
---
 .../esbuild.js                                | 32 ++-----------------
 1 file changed, 2 insertions(+), 30 deletions(-)
 rename packages/{vscode-graphql => graphql-language-service-cli}/esbuild.js (57%)

diff --git a/packages/vscode-graphql/esbuild.js b/packages/graphql-language-service-cli/esbuild.js
similarity index 57%
rename from packages/vscode-graphql/esbuild.js
rename to packages/graphql-language-service-cli/esbuild.js
index 87f8d67c..4b9147fa 100644
--- a/packages/vscode-graphql/esbuild.js
+++ b/packages/graphql-language-service-cli/esbuild.js
@@ -1,16 +1,8 @@
 const { build } = require('esbuild');
 const [, , arg] = process.argv;
 
-const logger = console;
-
-const isWatchMode = arg === '--watch';
-
 build({
-  entryPoints: [
-    'src/extension.ts',
-    'src/serverIpc/index.ts',
-    'src/serverStdio/index.ts',
-  ],
+  entryPoints: ['bin/graphql.js'],
   bundle: true,
   minify: arg === '--minify',
   platform: 'node',
@@ -54,24 +46,4 @@ build({
     'liquor',
     'twig',
   ],
-})
-  .then(({ errors, warnings }) => {
-    if (warnings.length) {
-      logger.warn(...warnings);
-    }
-    if (errors.length) {
-      logger.error(...errors);
-    }
-
-    logger.log('successfully bundled vscode-graphql ðŸš€');
-
-    if (isWatchMode) {
-      logger.log('watching... ðŸ•°');
-    } else {
-      process.exit();
-    }
-  })
-  .catch(err => {
-    logger.error(err);
-    process.exit(1);
-  });
+});
-- 
2.50.0

