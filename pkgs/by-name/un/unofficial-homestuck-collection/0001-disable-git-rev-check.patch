From 9f69077286540c75a245b44f6fd7b7cd03da2d44 Mon Sep 17 00:00:00 2001
From: Freya Murphy <freya@freyacat.org>
Date: Sun, 20 Jul 2025 11:53:51 -0400
Subject: [PATCH 1/3] disable git rev check

---
 vue.config.js | 21 +++------------------
 1 file changed, 3 insertions(+), 18 deletions(-)

diff --git a/vue.config.js b/vue.config.js
index 04b61d3..559b119 100644
--- a/vue.config.js
+++ b/vue.config.js
@@ -1,27 +1,12 @@
 const webpack = require('webpack')
 const { execSync } = require('child_process')

-const git_branch = execSync('git rev-parse --abbrev-ref HEAD').toString()
-
 var build_info = {
-  'process.env.BUILD_BRANCH': JSON.stringify(
-    git_branch.trim()
-  ),
+  'process.env.BUILD_BRANCH': "@git_branch@",
   'process.env.BUILD_DATE': JSON.stringify(new Date().toISOString()),
   'process.env.BUILD_PLATFORM': JSON.stringify(process.platform),
-  'process.env.BUILD_GIT_REVISION': JSON.stringify(
-    execSync('git rev-parse HEAD').toString().trim()
-  )
-}
-
-try {
-  const git_remote = execSync(`git config --get branch.${git_branch.trim()}.remote`).toString()
-  const git_remote_url = execSync(`git config --get remote.${git_remote.trim()}.url`).toString()
-
-  build_info['process.env.BUILD_GIT_REMOTE'] = JSON.stringify(git_remote_url.trim())
-} catch (e) {
-  build_info['process.env.BUILD_GIT_REMOTE'] = JSON.stringify("(no remote)")
-  console.warn("No git remote")
+  'process.env.BUILD_GIT_REVISION': "@git_revision@",
+  'process.env.BUILD_GIT_REMOTE': "@git_remote@",
 }

 module.exports = {
--
2.50.1

