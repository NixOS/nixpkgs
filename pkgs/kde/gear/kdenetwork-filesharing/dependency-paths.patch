diff --git a/samba/filepropertiesplugin/authhelper.cpp b/samba/filepropertiesplugin/authhelper.cpp
<<<<<<< HEAD
index b45b25f..b71554f 100644
--- a/samba/filepropertiesplugin/authhelper.cpp
+++ b/samba/filepropertiesplugin/authhelper.cpp
@@ -50,7 +50,7 @@ ActionReply AuthHelper::isuserknown(const QVariantMap &args)
=======
index 6cbbd90..ae1d696 100644
--- a/samba/filepropertiesplugin/authhelper.cpp
+++ b/samba/filepropertiesplugin/authhelper.cpp
@@ -49,7 +49,7 @@ ActionReply AuthHelper::isuserknown(const QVariantMap &args)
>>>>>>> 4dbde0a9cadc (Fixed upon CodeReview)
     }
 
     QProcess p;
-    const auto program = QStringLiteral("pdbedit");
+    const auto program = QStringLiteral("@samba@/bin/pdbedit");
<<<<<<< HEAD
     const auto arguments = QStringList({QStringLiteral("--debuglevel=0"), QStringLiteral("--user"), username});
     p.setProgram(program);
     p.setArguments(arguments);
@@ -92,7 +92,7 @@ ActionReply AuthHelper::createuser(const QVariantMap &args)
=======
     const auto arguments = QStringList({QStringLiteral("--debuglevel=0"), QStringLiteral("--user"), username });
     p.setProgram(program);
     p.setArguments(arguments);
@@ -88,7 +88,7 @@ ActionReply AuthHelper::createuser(const QVariantMap &args)
>>>>>>> 4dbde0a9cadc (Fixed upon CodeReview)
     }
 
     QProcess p;
-    p.setProgram(QStringLiteral("smbpasswd"));
+    p.setProgram(QStringLiteral("@samba@/bin/smbpasswd"));
<<<<<<< HEAD
     p.setArguments({QStringLiteral("-L"), /* local mode */
                     QStringLiteral("-s"), /* read from stdin */
                     QStringLiteral("-D"),
@@ -155,7 +155,7 @@ ActionReply AuthHelper::addtogroup(const QVariantMap &args)
     p.setArguments(
         {QStringLiteral("group"), QStringLiteral("mod"), QStringLiteral("{%1}").arg(group), QStringLiteral("-m"), QStringLiteral("{%1}").arg(user.value())});
 #elif defined(Q_OS_LINUX) || defined(Q_OS_HURD)
-    p.setProgram(QStringLiteral("/usr/sbin/usermod"));
+    p.setProgram(QStringLiteral("@usermod@"));
     p.setArguments({QStringLiteral("--append"), QStringLiteral("--groups"), group, user.value()});
 #else
 #error "Platform lacks group management support. Please add support."
diff --git a/samba/filepropertiesplugin/groupmanager.cpp b/samba/filepropertiesplugin/groupmanager.cpp
index 948f428..f25e549 100644
=======
     p.setArguments({
         QStringLiteral("-L"), /* local mode */
         QStringLiteral("-s"), /* read from stdin */
@@ -152,7 +152,7 @@ ActionReply AuthHelper::addtogroup(const QVariantMap &args)
         QStringLiteral("-m"),
         QStringLiteral("{%1}").arg(user.value()) });
 #elif defined(Q_OS_LINUX) || defined(Q_OS_HURD)
-    p.setProgram(QStringLiteral("/usr/sbin/usermod"));
+    p.setProgram(QStringLiteral("@usermod@"));
     p.setArguments({
         QStringLiteral("--append"),
         QStringLiteral("--groups"),
diff --git a/samba/filepropertiesplugin/groupmanager.cpp b/samba/filepropertiesplugin/groupmanager.cpp
index a2ba851..d54f6ce 100644
>>>>>>> 4dbde0a9cadc (Fixed upon CodeReview)
--- a/samba/filepropertiesplugin/groupmanager.cpp
+++ b/samba/filepropertiesplugin/groupmanager.cpp
@@ -18,7 +18,7 @@ GroupManager::GroupManager(QObject *parent)
 {
<<<<<<< HEAD
     QMetaObject::invokeMethod(this, [this] {
=======
     metaObject()->invokeMethod(this, [this] {
>>>>>>> 4dbde0a9cadc (Fixed upon CodeReview)
         auto proc = new QProcess;
-        proc->setProgram(QStringLiteral("testparm"));
+        proc->setProgram(QStringLiteral("@samba@/bin/testparm"));
         proc->setArguments({QStringLiteral("--debuglevel=0"),
                             QStringLiteral("--suppress-prompt"),
                             QStringLiteral("--verbose"),
<<<<<<< HEAD
diff --git a/samba/filepropertiesplugin/usermanager.cpp b/samba/filepropertiesplugin/usermanager.cpp
index 3be3b8c..66fd965 100644
--- a/samba/filepropertiesplugin/usermanager.cpp
+++ b/samba/filepropertiesplugin/usermanager.cpp
@@ -134,7 +134,7 @@ bool UserManager::canManageSamba() const
=======
diff --git a/samba/filepropertiesplugin/sambausershareplugin.cpp b/samba/filepropertiesplugin/sambausershareplugin.cpp
index 4f6642e..86ea121 100644
--- a/samba/filepropertiesplugin/sambausershareplugin.cpp
+++ b/samba/filepropertiesplugin/sambausershareplugin.cpp
@@ -112,7 +112,8 @@ SambaUserSharePlugin::SambaUserSharePlugin(QObject *parent)
 bool SambaUserSharePlugin::isSambaInstalled()
 {
     return QFile::exists(QStringLiteral("/usr/sbin/smbd"))
-        || QFile::exists(QStringLiteral("/usr/local/sbin/smbd"));
+        || QFile::exists(QStringLiteral("/usr/local/sbin/smbd"))
+        || QFile::exists(QStringLiteral("/run/current-system/sw/bin/smbd"));
 }
 
 void SambaUserSharePlugin::showSambaStatus()
diff --git a/samba/filepropertiesplugin/usermanager.cpp b/samba/filepropertiesplugin/usermanager.cpp
index 29238ce..ff20fcb 100644
--- a/samba/filepropertiesplugin/usermanager.cpp
+++ b/samba/filepropertiesplugin/usermanager.cpp
@@ -138,7 +138,7 @@ bool UserManager::canManageSamba() const
>>>>>>> 4dbde0a9cadc (Fixed upon CodeReview)
 void UserManager::load()
 {
     auto proc = new QProcess(this);
-    proc->setProgram(QStringLiteral("testparm"));
+    proc->setProgram(QStringLiteral("@samba@/bin/testparm"));
<<<<<<< HEAD
     proc->setArguments({QStringLiteral("--debuglevel=0"),
                         QStringLiteral("--suppress-prompt"),
                         QStringLiteral("--verbose"),
=======
     proc->setArguments({
         QStringLiteral("--debuglevel=0"),
         QStringLiteral("--suppress-prompt"),
>>>>>>> 4dbde0a9cadc (Fixed upon CodeReview)
