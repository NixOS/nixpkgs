* Importing Modules
  :PROPERTIES:
  :CUSTOM_ID: sec-importing-modules
  :END:

Sometimes NixOS modules need to be used in configuration but exist
outside of Nixpkgs. These modules can be imported:

#+BEGIN_EXAMPLE
  { config, lib, pkgs, ... }:

  {
    imports =
      [ # Use a locally-available module definition in
        # ./example-module/default.nix
          ./example-module
      ];

    services.exampleModule.enable = true;
  }
#+END_EXAMPLE

The environment variable =NIXOS_EXTRA_MODULE_PATH= is an absolute path
to a NixOS module that is included alongside the Nixpkgs NixOS modules.
Like any NixOS module, this module can import additional modules:

#+BEGIN_EXAMPLE
  # ./module-list/default.nix
  [
    ./example-module1
    ./example-module2
  ]
#+END_EXAMPLE

#+BEGIN_EXAMPLE
  # ./extra-module/default.nix
  { imports = import ./module-list.nix; }
#+END_EXAMPLE

#+BEGIN_EXAMPLE
  # NIXOS_EXTRA_MODULE_PATH=/absolute/path/to/extra-module
  { config, lib, pkgs, ... }:

  {
    # No `imports` needed

    services.exampleModule1.enable = true;
  }
#+END_EXAMPLE
