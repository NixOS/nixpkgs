<section xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         version="5.0"
         xml:id="sec-release-19.03">
 <title>Release 19.03 (“Koi”, 2019/03/??)</title>

 <section xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         version="5.0"
         xml:id="sec-release-19.03-highlights">
  <title>Highlights</title>

  <para>
   In addition to numerous new and upgraded packages, this release has the
   following highlights:
  </para>

  <itemizedlist>
   <listitem>
    <para />
   </listitem>
  </itemizedlist>
 </section>

 <section xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         version="5.0"
         xml:id="sec-release-19.03-new-services">
  <title>New Services</title>

  <para>
   The following new services were added since the last release:
  </para>

  <itemizedlist>
   <listitem>
    <para />
   </listitem>
  </itemizedlist>
 </section>

 <section xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         version="5.0"
         xml:id="sec-release-19.03-incompatibilities">
  <title>Backward Incompatibilities</title>

  <para>
   When upgrading from a previous release, please be aware of the following
   incompatible changes:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     The minimum version of Nix required to evaluate Nixpkgs is now 2.0.
    </para>
    <itemizedlist>
     <listitem>
      <para>
       For users of NixOS 18.03 and 19.03, NixOS defaults to Nix 2.0, but
       supports using Nix 1.11 by setting <literal>nix.package =
       pkgs.nix1;</literal>. If this option is set to a Nix 1.11 package, you
       will need to either unset the option or upgrade it to Nix 2.0.
      </para>
     </listitem>
     <listitem>
      <para>
       For users of NixOS 17.09, you will first need to upgrade Nix by setting
       <literal>nix.package = pkgs.nixStable2;</literal> and run
       <command>nixos-rebuild switch</command> as the <literal>root</literal>
       user.
      </para>
     </listitem>
     <listitem>
      <para>
       For users of a daemon-less Nix installation on Linux or macOS, you can
       upgrade Nix by running <command>curl https://nixos.org/nix/install |
       sh</command>, or prior to doing a channel update, running
       <command>nix-env -iA nix</command>.
      </para>
      <para>
       If you have already run a channel update and Nix is no longer able to
       evaluate Nixpkgs, the error message printed should provide adequate
       directions for upgrading Nix.
      </para>
     </listitem>
     <listitem>
      <para>
       For users of the Nix daemon on macOS, you can upgrade Nix by running
       <command>sudo -i sh -c 'nix-channel --update &amp;&amp; nix-env -iA
       nixpkgs.nix'; sudo launchctl stop org.nixos.nix-daemon; sudo launchctl
       start org.nixos.nix-daemon</command>.
      </para>
     </listitem>
    </itemizedlist>
   </listitem>

   <listitem>
    <para>
     <emphasis role="strong">
     The client configuration for OpenSSH
     no longer enables support for DSA host keys.
     Most OpenSSH servers, including NixOS,
     will generate multiple SSH host keys using different algorithms,
     so a host key with an accepted type should be available.
     However, if only a DSA host key is available on a host,
     this change could cause you to be unable to SSH to that host.
     If you are affected, generate non-DSA host keys on that machine;
     or, unfavorably, re-enable DSA support manually (see next paragraph).
     Note that this only affects SSH host keys;
     the client configuration still allows DSA public keys.
     </emphasis>
    </para>
    <para>
     DSA support was deprecated in
     <link xlink:href="https://www.openssh.com/legacy.html">OpenSSH 7.0</link>,
     and disabled by default (host and pub keys) for the OpenSSH server in
     <link xlink:href="https://nixos.org/nixos/manual/release-notes.html#sec-release-18.03-incompatibilities">NixOS 18.03</link>,
     due to it being too weak.
    </para>
    <para>
     In the case of breakage, as this is a client-side change only,
     you can fully override <literal>HostKeyAlgorithms</literal>
     via the NixOS option <literal>services.openssh.extraConfig</literal>
     or in your <literal>~/.ssh/config</literal>.
     Alternatively, you can safely rollback the NixOS changes;
     note that you need to rollback both the NixOS ssh client config changes
     as well as the openssh package itself.
     However, it is recommended that you instead upgrade to stronger host keys.
    </para>
   </listitem>
  </itemizedlist>
 </section>

 <section xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         version="5.0"
         xml:id="sec-release-19.03-notable-changes">
  <title>Other Notable Changes</title>

  <itemizedlist>
   <listitem>
    <para />
   </listitem>
  </itemizedlist>
 </section>
</section>
