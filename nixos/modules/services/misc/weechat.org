* WeeChat
  :PROPERTIES:
  :CUSTOM_ID: module-services-weechat
  :END:

[[https://weechat.org/][WeeChat]] is a fast and extensible IRC client.

* Basic Usage
  :PROPERTIES:
  :CUSTOM_ID: module-services-weechat-basic-usage
  :END:

By default, the module creates a =systemd= unit which runs the chat
client in a detached =screen= session.

This can be done by enabling the =weechat= service:

#+BEGIN_EXAMPLE
  { ... }:

  {
    services.weechat.enable = true;
  }
#+END_EXAMPLE

The service is managed by a dedicated user named =weechat= in the state
directory =/var/lib/weechat=.

* Re-attaching to WeeChat
  :PROPERTIES:
  :CUSTOM_ID: module-services-weechat-reattach
  :END:

WeeChat runs in a screen session owned by a dedicated user. To
explicitly allow your another user to attach to this session, the
=screenrc= needs to be tweaked by adding
[[https://www.gnu.org/software/screen/manual/html_node/Multiuser.html#Multiuser][multiuser]]
support:

#+BEGIN_EXAMPLE
  {
    programs.screen.screenrc = ''
      multiuser on
      acladd normal_user
    '';
  }
#+END_EXAMPLE

Now, the session can be re-attached like this:

#+BEGIN_EXAMPLE
  screen -x weechat/weechat-screen
#+END_EXAMPLE

/The session name can be changed using
[[#opt-services.weechat.sessionName][services.weechat.sessionName.]]/
