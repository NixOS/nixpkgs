<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="module-services-weechat">
  <title>WeeChat</title>
  <para>
    <link xlink:href="https://weechat.org/">WeeChat</link> is a fast and
    extensible IRC client.
  </para>
  <section xml:id="module-services-weechat-basic-usage">
    <title>Basic Usage</title>
    <para>
      By default, the module creates a
      <link xlink:href="https://www.freedesktop.org/wiki/Software/systemd/"><literal>systemd</literal></link>
      unit which runs the chat client in a detached
      <link xlink:href="https://www.gnu.org/software/screen/"><literal>screen</literal></link>
      session.
    </para>
    <para>
      This can be done by enabling the <literal>weechat</literal>
      service:
    </para>
    <programlisting>
{ ... }:

{
  services.weechat.enable = true;
}
</programlisting>
    <para>
      The service is managed by a dedicated user named
      <literal>weechat</literal> in the state directory
      <literal>/var/lib/weechat</literal>.
    </para>
  </section>
  <section xml:id="module-services-weechat-reattach">
    <title>Re-attaching to WeeChat</title>
    <para>
      WeeChat runs in a screen session owned by a dedicated user. To
      explicitly allow your another user to attach to this session, the
      <literal>screenrc</literal> needs to be tweaked by adding
      <link xlink:href="https://www.gnu.org/software/screen/manual/html_node/Multiuser.html#Multiuser">multiuser</link>
      support:
    </para>
    <programlisting>
{
  programs.screen.screenrc = ''
    multiuser on
    acladd normal_user
  '';
}
</programlisting>
    <para>
      Now, the session can be re-attached like this:
    </para>
    <programlisting>
screen -x weechat/weechat-screen
</programlisting>
    <para>
      <emphasis>The session name can be changed using
      <link xlink:href="options.html#opt-services.weechat.sessionName">services.weechat.sessionName.</link></emphasis>
    </para>
  </section>
</chapter>
