# Fetchers {#chap-pkgs-fetchers}

When using Nix, you will frequently need to download source code and other files from the internet. Nixpkgs comes with a few helper functions that allow you to fetch fixed-output derivations in a structured way.

The two fetcher primitives are `fetchurl` and `fetchzip`. Both of these have two required arguments, a URL and a hash. The hash is typically `sha256`, although many more hash algorithms are supported. Nixpkgs contributors are currently recommended to use `sha256`. This hash will be used by Nix to identify your source. A typical usage of fetchurl is provided below.

```nix
{ stdenv, fetchurl }:

stdenv.mkDerivation {
  name = "hello";
  src = fetchurl {
    url = "http://www.example.org/hello.tar.gz";
    sha256 = "1111111111111111111111111111111111111111111111111111";
  };
}
```

The main difference between `fetchurl` and `fetchzip` is in how they store the contents. `fetchurl` will store the unaltered contents of the URL within the Nix store. `fetchzip` on the other hand will decompress the archive for you, making files and directories directly accessible in the future. `fetchzip` can only be used with archives. Despite the name, `fetchzip` is not limited to .zip files and can also be used with any tarball.

`fetchpatch` works very similarly to `fetchurl` with the same arguments expected. It expects patch files as a source and and performs normalization on them before computing the checksum. For example it will remove comments or other unstable parts that are sometimes added by version control systems and can change over time.


Other fetcher functions allow you to add source code directly from a VCS such as subversion or git. These are mostly straightforward names based on the name of the command used with the VCS system. Because they give you a working repository, they act most like `fetchzip`.

## `fetchsvn`

Used with Subversion. Expects `url` to a Subversion directory, `rev`, and `sha256`.

## `fetchgit`

Used with Git. Expects `url` to a Git repo, `rev`, and `sha256`. `rev` in this case can be full the git commit id (SHA1 hash) or a tag name like `refs/tags/v1.0`.

Additionally the following optional arguments can be given: `fetchSubmodules = true` makes `fetchgit` also fetch the submodules of a repository. If `deepClone` is set to true, the entire repository is cloned as opposing to just creating a shallow clone. `deepClone = true` also implies `leaveDotGit = true` which means that the `.git` directory of the clone won't be removed after checkout.

## `fetchfossil`

Used with Fossil. Expects `url` to a Fossil archive, `rev`, and `sha256`.

## `fetchcvs`

Used with CVS. Expects `cvsRoot`, `tag`, and `sha256`.

## `fetchhg`

Used with Mercurial. Expects `url`, `rev`, and `sha256`.

A number of fetcher functions wrap part of `fetchurl` and `fetchzip`. They are mainly convenience functions intended for commonly used destinations of source code in Nixpkgs. These wrapper fetchers are listed below.

## `fetchFromGitHub`

Fetch a Git repository from [GitHub](https://github.com/).
GitHub repository URLs are in the format `https://{githubBase}/{owner}/{repo}`.

### Required arguments

`owner`

: GitHub user or organization that controls this repository.

`repo`

: Name of the repository.

`rev`

: Git commit hash or tag (e.g. v1.0) to fetch.

`sha256`

: Hash of the extracted directory.

### Optional arguments

`private`

: If set to `true` the nix build process (nix-daemon in multi-user
  mode) authenticate with GitHub using the `USERNAME` and `PASSWORD`
  variables in its environment.

`githubBase`

: GitHub domain name.  Defaults to `github.com`, but can be overridden
  for GitHub Enterprise repositories.

`fetchFromGitHub` uses `fetchzip` to download the source archive generated by GitHub for the specified revision. If `leaveDotGit`, `deepClone` or `fetchSubmodules` are set to `true`, `fetchFromGitHub` will use `fetchgit` instead. Refer to its section for documentation of these options.

## `fetchFromGitLab`

Fetch a Git repository from [GitLab](https://gitlab.com/).
GitLab repository URLs are in the format `https://{domain}/{owner}/{repo}` or
`https://{domain}/{owner}/{group}/{repo}`.

### Required arguments

`owner`

: GitLab user or organization that controls this repository.

`repo`

: Name of the repository.

`rev`

: Git commit hash or tag (e.g. v1.0) to fetch.

`sha256`

: Hash of the extracted directory.

### Optional arguments

`group`

: GitLab [group](https://docs.gitlab.com/ee/user/group/) the
  repository is under.

`domain`

: Domain name of this GitLab instance.  Defaults to `gitlab.com`.

## `fetchFromGitiles`

This is used with [Gitiles](https://gerrit.googlesource.com/gitiles/)
repositories. The arguments expected are similar to `fetchgit`.

## `fetchFromBitbucket`

Fetch a Git repository from [BitBucket](https://bitbucket.org/).
Bitbucket repository URLs are in the format
`https://bitbucket.org/{owner}/{repo}`.

### Required arguments

`owner`

: BitBucket user or team that controls this repository.

`repo`

: Name of the repository.

`rev`

: Git commit hash or tag (e.g. v1.0) to fetch.

`sha256`

: Hash of the extracted directory.

## `fetchFromSavannah`

Fetch a Git repository from [GNU Savannah](https://savannah.gnu.org/).
Savannah URLs are in the format
`https://git.savannah.gnu.org/cgit/{path}.git`.

### Required arguments

`repo`

: Path of the repository.

`rev`

: Git commit hash or tag (e.g. v1.0) to fetch.

`sha256`

: Hash of the extracted directory.

## `fetchFromRepoOrCz`

Fetch a Git repository from [repo.or.cz](https://repo.or.cz/).
repo.or.cz URLs are in the format `https://repo.or.cz/{repo}.git`.

### Required arguments

`repo`

: Path of the repository.

`rev`

: Git commit hash or tag (e.g. v1.0) to fetch.

`sha256`

: Hash of the extracted directory.
